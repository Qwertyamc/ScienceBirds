class Box{constructor(t,e,s,o,i,h,r,d,l){this.w=s,this.h=o,this.removed=!1,this.toRemove=!1,this.imgAsset=d,this.hp=i;let a=new box2d.b2BodyDef;a.type=l,a.position=scaleToWorld(t,e),a.fixedRotation=!1;let y=new box2d.b2FixtureDef;y.shape=new box2d.b2PolygonShape,y.shape.SetAsBox(scaleToWorld(this.w/2),scaleToWorld(this.h/2)),y.density=r,y.friction=h,y.restitution=0,this.body=world.CreateBody(a),this.body.CreateFixture(y),this.body.SetUserData(this)}setVelocity(t){this.body.SetLinearVelocity(new box2d.b2Vec2(t.x,t.y))}destroyNow(){world.DestroyBody(this.body),this.removed=!0}toDestroy(){this.toRemove=!0}damage(){this.hp>0&&this.hp--,0==this.hp&&this.toDestroy()}done(){return this.toRemove&&!this.removed&&(world.DestroyBody(this.body),this.removed=!0),this.removed}display(){let t=scaleToPixels(this.body.GetPosition()),e=this.body.GetAngleRadians();rectMode(CENTER),push(),translate(t.x,t.y),rotate(e),fill(127),stroke(200),strokeWeight(2),rect(0,0,this.w,this.h),pop()}displayAsset(){let t=scaleToPixels(this.body.GetPosition()),e=this.body.GetAngleRadians();push(),translate(t.x,t.y),rotate(e);try{image(this.imgAsset[this.hp-1],.5*-this.w,.5*-this.w)}catch(t){image(this.imgAsset[0],.5*-this.w,.5*-this.w)}pop()}applyBlastImpulse(t,e,s){let o=createVector(t.x-e.x,t.y-e.y);o.normalize().mult(-1),this.setVelocity(o.mult(s))}}